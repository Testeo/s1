-- SIS 758 Javier Quispe Fernandez -- Lunes 14 mayo 2012 v2 (UrlReal + UrlVirtual + Plur.)--create database BiblioContenidos;--GO--use BiblioContenidos;--GOcreate table Usuarios( --quitar Nick, Passw, Email, TipoUsuario en v2.0	Id int identity(1,1),	--Nick varchar(50),	--Password varchar(50) not null,	--Email varchar(50) not null,	Avatar varchar(50), --URL de la imagen	ApPaterno varchar(50),	ApMaterno varchar(50),	Nombres varchar(50),	Ubicacion varchar(50),	Karma int,	--TipoUsuario varchar(30), --Moderador, Novato, 	UserId uniqueidentifier not null,	foreign key(UserId) references 	aspnet_Users(UserId),	primary key(Id))create table Intereses(	Interes varchar(50) primary key,	IdUsuario int not null,	foreign key(IdUsuario) references Usuarios(Id))create table Categorias(	Id int identity(1,1),	Descripcion varchar(50) not null,	Estado varchar(50) not null,	primary key(Id) )create table Contenidos(	Id int identity(1,1),	FechaPublicacion datetime not null,	IdUsuario int not null,	Tipo varchar(30) not null, --Libro,Tutorial,Curso,Articulo,Pregunta,Respuesta	Titulo varchar(50) not null,	Descripcion varchar(50),   --En v3 maaaaaaaaaaaas largo	--MeGusta int not null, v1.5	IdCategoria int not null,	UrlReal varchar(50) not null, --v2.0	UrlVirtual varchar(50) not null,	Estado varchar(50),	--IdContenido int not null, --v1.5 ????	foreign key(IdUsuario) references Usuarios(Id),	foreign key(IdCategoria) references Categorias(Id),	primary key(Id))create table Gustas( --v1.5	Id int identity(1,1),	IdContenido int not null,	IdUsuario int not null,	MeGusta int not null, -- 0(No me gusta) OR  1(Me gusta)	Fecha datetime not null	primary key(Id),	foreign key(IdContenido) references Contenidos(Id),	foreign key(IdUsuario) references Usuarios(Id))create table Preguntas( --Es un Contenido 	Id int identity(1,1),	IdContenido int not null,	primary key(Id),	foreign key(IdContenido) references Contenidos(Id))create table Respuestas( --Es un Contenido 	Id int identity(1,1),	IdPregunta int not null,	IdContenido int not null,	primary key(Id),	foreign key(IdContenido) references Contenidos(Id),	foreign key(IdPregunta) references Preguntas(Id))create table Libros( --Es un Contenido 	Id int identity(1,1),	Autor varchar(50) not null,	Portada varchar(50), --URL de la imagen	Indice varchar(50),	AnhoPublicacion varchar(30),	IdContenido int,	primary key(Id),	foreign key(IdContenido) references Contenidos(Id))create table TutorialCursos( --Es un Contenido. Tiene muchas secciones	Id int identity(1,1),   	IdContenido int not null,	primary key(Id),	foreign key(IdContenido) references Contenidos(Id))create table Seccions(	Id int not null, --12, 13 ... | 21, 22, ...	SubTitulo varchar(50) not null,	URL varchar(50) not null,	IdTutorialCurso int not null,	primary key(Id),	foreign key(IdTutorialCurso) references TutorialCursos(Id))create table Articulos( --Es un Contenido.	Id int identity(1,1), 	IdContenido int not null,	primary key(Id),	foreign key(IdContenido) references Contenidos(Id))create table Comentarios(	Id int identity(1,1),	Descripcion varchar(1000) not null, --v2.0	IdUsuario int not null,	Fecha datetime not null,	--IdArticulo int not null,	IdContenido int not null, --v1.5	Estado varchar(50),	primary key(Id),	foreign key(IdUsuario) references Usuarios(Id),	--foreign key(IdArticulo) references  Articulo(Id)--v1.5	foreign key(IdContenido) references Contenidos(Id))create table Imagens(	Id int identity(1,1),	Nombre varchar(50) not null,	TextoImagen varchar(50) not null,	--Captcha char(2) not null, --si, no   [Generado v2]	Estado varchar(50) not null,	primary key(Id))create table RelArticuloImagens(	IdArticulo int not null,	IdImagen int not null,	CoordX int not null,	CoordY int not null,	primary key(IdArticulo, IdImagen),		foreign key(IdArticulo) references Articulos(Id),	foreign key(IdImagen) references Imagens(Id))create table RelSeccionImagens(	IdSeccion int not null,	IdImagen int not null,	CoordX int not null,	CoordY int not null,	primary key(IdSeccion, IdImagen),		foreign key(IdSeccion) references Seccions(Id),	foreign key(IdImagen) references Imagens(Id))